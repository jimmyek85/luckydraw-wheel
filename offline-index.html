<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1602 幸运轮盘 - 离线版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
        }
        
        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto;
        }
        
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            border: 8px solid #fff;
            box-shadow: 0 0 30px rgba(0,0,0,0.3);
            transition: transform 4s cubic-bezier(0.23, 1, 0.32, 1);
        }
        
        .wheel-segment {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: 100% 100%;
            clip-path: polygon(0 0, 100% 0, 100% 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 11px;
            text-align: center;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
            border: 1px solid rgba(255,255,255,0.3);
        }
        
        .wheel-segment span {
            transform: rotate(-22.5deg);
            white-space: nowrap;
            max-width: 80px;
            line-height: 1.2;
            padding: 2px;
        }
        
        .wheel-pointer {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 25px solid #ff6b35;
            z-index: 10;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        
        .spin-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            border: 4px solid white;
            color: white;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            z-index: 5;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
        
        .spin-button:hover {
            transform: translate(-50%, -50%) scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }
        
        .spin-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        
        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #ffd700;
            border-radius: 50%;
            animation: float 3s ease-out forwards;
        }
        
        @keyframes float {
            0% {
                opacity: 1;
                transform: translateY(0) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) rotate(360deg);
            }
        }
        
        .modal {
            transition: all 0.3s ease;
        }
        
        .modal.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .language-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .language-btn {
            padding: 8px 16px;
            margin: 0 4px;
            border: 2px solid #ff6b35;
            background: white;
            color: #ff6b35;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .language-btn.active {
            background: #ff6b35;
            color: white;
        }
        
        .language-btn:hover {
            transform: scale(1.05);
        }

        /* 彩虹霓虹灯效果 */
        .neon-border {
            border: 3px solid;
            border-image: linear-gradient(45deg, 
                #ff0000, #ff7f00, #ffff00, #00ff00, 
                #0000ff, #4b0082, #9400d3, #ff0000) 1;
            animation: rainbow-glow 2s linear infinite;
            box-shadow: 
                0 0 10px rgba(255, 0, 0, 0.5),
                0 0 20px rgba(255, 127, 0, 0.5),
                0 0 30px rgba(255, 255, 0, 0.5);
        }

        @keyframes rainbow-glow {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-amber-50 to-orange-100 min-h-screen">
    <!-- 语言切换器 -->
    <div class="language-switcher">
        <button id="en-btn" class="language-btn" onclick="switchLanguage('en')">EN</button>
        <button id="zh-btn" class="language-btn active" onclick="switchLanguage('zh')">中文</button>
    </div>

    <!-- 粒子效果容器 -->
    <div id="particles" class="particles"></div>

    <!-- 主页面 -->
    <div id="landing-page-container" class="min-h-screen flex items-center justify-center p-4">
        <div class="text-center max-w-md mx-auto bg-white rounded-2xl shadow-2xl p-8">
            <div class="mb-6">
                <h1 class="text-4xl font-bold text-amber-600 mb-2" data-lang-en="Welcome to 1602">欢迎来到 1602</h1>
                <p class="text-lg text-gray-600" data-lang-en="A Surprise Awaits!">扫码有惊喜！</p>
            </div>
            
            <div class="mb-8">
                <div class="w-32 h-32 mx-auto mb-4 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center text-white text-6xl">
                    🎁
                </div>
                <p class="text-gray-700 mb-4" data-lang-en="Meeting is fate, a gift is our bond.">与你相遇是缘分，扫码送礼结情分。</p>
                <p class="text-sm text-gray-500" data-lang-en="Scan or Click Below to Join!">扫描或点击下方按钮参与！</p>
            </div>
            
            <button onclick="showRegisterPage()" class="w-full bg-gradient-to-r from-amber-500 to-orange-500 text-white py-4 px-6 rounded-xl font-semibold text-lg hover:from-amber-600 hover:to-orange-600 transition-all duration-300 transform hover:scale-105 shadow-lg" data-lang-en="Enter Now">
                快捷通道
            </button>
        </div>
    </div>

    <!-- 注册页面 -->
    <div id="register-page" class="min-h-screen flex items-center justify-center p-4 hidden">
        <div class="w-full max-w-md mx-auto bg-white rounded-2xl shadow-2xl p-8">
            <h2 class="text-2xl font-bold text-center text-amber-600 mb-6" data-lang-en="Become a 1602 Member">成为 1602 会员</h2>
            <p class="text-center text-gray-600 mb-8" data-lang-en="Fill in your details to get 1 free spin!">填写资料即可获得1次免费抽奖机会！</p>
            
            <form id="register-form" class="space-y-4">
                <div>
                    <input type="text" id="name" placeholder="名字（必填）" data-lang-en="Name (Required)" class="w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent" required>
                </div>
                <div class="flex">
                    <select id="country-code" class="p-4 border border-gray-300 rounded-l-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                        <option value="+60">+60 (马来西亚)</option>
                        <option value="+86">+86 (中国)</option>
                        <option value="+1">+1 (美国)</option>
                        <option value="+44">+44 (英国)</option>
                    </select>
                    <input type="tel" id="phone" placeholder="电话（必填）" data-lang-en="Phone (Required)" class="flex-1 p-4 border border-gray-300 rounded-r-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent" required>
                </div>
                <div>
                    <input type="email" id="email" placeholder="邮箱（选填）" data-lang-en="Email (Optional)" class="w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                </div>
                <div>
                    <input type="text" id="address" placeholder="地址（选填）" data-lang-en="Address (Optional)" class="w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                </div>
                <button type="submit" class="w-full bg-gradient-to-r from-amber-500 to-orange-500 text-white py-4 px-6 rounded-xl font-semibold text-lg hover:from-amber-600 hover:to-orange-600 transition-all duration-300 transform hover:scale-105 shadow-lg" data-lang-en="Submit & Get Spin!">
                    提交并获取抽奖机会！
                </button>
            </form>
        </div>
    </div>

    <!-- 轮盘页面 -->
    <div id="wheel-page" class="min-h-screen flex flex-col items-center justify-center p-4 hidden">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-amber-600 mb-2" data-lang-en="1602 Lucky Draw">1602 幸运轮盘</h1>
            <p class="text-lg text-gray-700">
                <span data-lang-en="Welcome, ">欢迎, </span>
                <span id="user-name-display" class="font-semibold text-amber-600"></span>
            </p>
            <p class="text-sm text-gray-600 mt-2">
                <span id="chances-left" class="font-bold text-amber-600">1</span>
                <span data-lang-en="chances left">次机会</span>
            </p>
        </div>

        <!-- 轮盘 -->
        <div class="wheel-container neon-border rounded-full mb-8">
            <div id="wheel" class="wheel">
                <!-- 轮盘片段将通过JavaScript生成 -->
            </div>
            <div class="wheel-pointer"></div>
            <button id="spin-btn" class="spin-button" data-lang-en="SPIN">开始抽奖</button>
        </div>

        <!-- 分享区域 -->
        <div class="share-section text-center">
            <p class="text-sm text-gray-600 mb-4" data-lang-en="Share to get a RM2 cash voucher!">成功分享可获得RM2现金券！</p>
            <div class="flex justify-center space-x-4">
                <button onclick="share('facebook')" class="bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 transition-colors">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                </button>
                <button onclick="share('whatsapp')" class="bg-green-600 text-white p-3 rounded-full hover:bg-green-700 transition-colors">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- 结果模态框 -->
    <div id="result-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden modal">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full text-center">
            <div id="modal-title" class="text-2xl font-bold mb-4"></div>
            <div id="modal-content" class="mb-6">
                <div id="modal-text" class="text-lg text-gray-700 mb-4"></div>
                <div id="prize-message" class="text-sm text-amber-600 font-semibold"></div>
            </div>
            <button id="modal-close-btn" class="bg-amber-500 text-white px-6 py-3 rounded-xl hover:bg-amber-600 transition-colors" data-lang-en="Close">关闭</button>
        </div>
    </div>

    <script>
        // 语言数据
        const langData = {
            en: {
                "Welcome to 1602": "Welcome to 1602",
                "A Surprise Awaits!": "A Surprise Awaits!",
                "Meeting is fate, a gift is our bond.": "Meeting is fate, a gift is our bond.",
                "Scan or Click Below to Join!": "Scan or Click Below to Join!",
                "Enter Now": "Enter Now",
                "Become a 1602 Member": "Become a 1602 Member",
                "Fill in your details to get 1 free spin!": "Fill in your details to get 1 free spin!",
                "Name (Required)": "Name (Required)",
                "Phone (Required)": "Phone (Required)",
                "Email (Optional)": "Email (Optional)",
                "Address (Optional)": "Address (Optional)",
                "Submit & Get Spin!": "Submit & Get Spin!",
                "1602 Lucky Draw": "1602 Lucky Draw",
                "Welcome, ": "Welcome, ",
                "SPIN": "SPIN",
                "chances left": "chances left",
                "Share to get a RM2 cash voucher!": "Share to get a RM2 cash voucher!",
                "Close": "Close",
                "Congratulations!": "Congratulations!",
                "You won a": "You won a",
                "Better luck next time!": "Better luck next time!",
                "You get another free spin!": "You get another free spin!",
                "Thank You": "Thank You",
                "Spin Again!": "Spin Again!",
                "Congratulations! Come to our booth to claim your prize!": "Congratulations! Come to our booth to claim your prize!",
                "Visit our Facebook page and get amazing prizes by scanning QR codes at our 1602 booth!": "Visit our Facebook page and get amazing prizes by scanning QR codes at our 1602 booth!",
                "Welcome! Join our exciting QR code scanning activity at 1602 booth for FREE amazing prizes! Don't miss out!": "Welcome! Join our exciting QR code scanning activity at 1602 booth for FREE amazing prizes! Don't miss out!",
                "Cash Voucher RM5": "Cash Voucher RM5",
                "Online Voucher RM10": "Online Voucher RM10",
                "Online Voucher RM20": "Online Voucher RM20",
                "New 330ml Can": "New 330ml Can",
                "Free 660ml Bottle": "Free 660ml Bottle",
                "1602 Pen": "1602 Pen",
                "Cooler Bag": "Cooler Bag",
                "1602 Mug": "1602 Mug",
                "Beer Card": "Beer Card",
                "Wine Card": "Wine Card"
            },
            zh: {
                "Welcome to 1602": "欢迎来到 1602",
                "A Surprise Awaits!": "扫码有惊喜！",
                "Meeting is fate, a gift is our bond.": "与你相遇是缘分，扫码送礼结情分。",
                "Scan or Click Below to Join!": "扫描或点击下方按钮参与！",
                "Enter Now": "快捷通道",
                "Become a 1602 Member": "成为 1602 会员",
                "Fill in your details to get 1 free spin!": "填写资料即可获得1次免费抽奖机会！",
                "Name (Required)": "名字（必填）",
                "Phone (Required)": "电话（必填）",
                "Email (Optional)": "邮箱（选填）",
                "Address (Optional)": "地址（选填）",
                "Submit & Get Spin!": "提交并获取抽奖机会！",
                "1602 Lucky Draw": "1602 幸运轮盘",
                "Welcome, ": "欢迎, ",
                "SPIN": "开始抽奖",
                "chances left": "次机会",
                "Share to get a RM2 cash voucher!": "成功分享可获得RM2现金券！",
                "Close": "关闭",
                "Congratulations!": "恭喜！",
                "You won a": "您抽中了",
                "Better luck next time!": "祝您下次好运！",
                "You get another free spin!": "您获得了一次额外抽奖机会！",
                "Thank You": "谢谢参与",
                "Spin Again!": "再来一次！",
                "Congratulations! Come to our booth to claim your prize!": "恭喜中奖！快来我们档口兑换奖品吧！",
                "Visit our Facebook page and get amazing prizes by scanning QR codes at our 1602 booth!": "访问我们的Facebook页面，来到1602档口扫码获大奖！",
                "Welcome! Join our exciting QR code scanning activity at 1602 booth for FREE amazing prizes! Don't miss out!": "欢迎！快来参与我们1602档口的扫码活动，免费获得大奖！千万别错过！",
                "Cash Voucher RM5": "RM5 现金券",
                "Online Voucher RM10": "RM10 线上券",
                "Online Voucher RM20": "RM20 线上券",
                "New 330ml Can": "330ml罐装新品",
                "Free 660ml Bottle": "免费660ml瓶装",
                "1602 Pen": "1602纪念笔",
                "Cooler Bag": "保冷袋",
                "1602 Mug": "纪念酒杯",
                "Beer Card": "酒卡",
                "Wine Card": "酒卡"
            }
        };

        // 全局变量
        let currentLang = 'zh';
        let currentUser = null;
        let userChances = 1;
        let isSpinning = false;

        // 奖品配置
        const prizes = [
            { name: "Cash Voucher RM5", color: "#FF6B6B", weight: 15 },
            { name: "Thank You", color: "#4ECDC4", weight: 25 },
            { name: "Online Voucher RM10", color: "#45B7D1", weight: 12 },
            { name: "Spin Again!", color: "#96CEB4", weight: 20 },
            { name: "Online Voucher RM20", color: "#FFEAA7", weight: 8 },
            { name: "New 330ml Can", color: "#DDA0DD", weight: 10 },
            { name: "Free 660ml Bottle", color: "#98D8C8", weight: 5 },
            { name: "1602 Pen", color: "#F7DC6F", weight: 15 },
            { name: "Cooler Bag", color: "#BB8FCE", weight: 8 },
            { name: "1602 Mug", color: "#85C1E9", weight: 12 },
            { name: "Beer Card", color: "#F8C471", weight: 7 },
            { name: "Wine Card", color: "#82E0AA", weight: 5 }
        ];

        // 语言切换功能
        function switchLanguage(lang) {
            currentLang = lang;
            
            // 更新按钮状态
            document.getElementById('en-btn').classList.toggle('active', lang === 'en');
            document.getElementById('zh-btn').classList.toggle('active', lang === 'zh');
            
            // 更新所有文本
            const elements = document.querySelectorAll('[data-lang-en]');
            elements.forEach(element => {
                const key = element.getAttribute('data-lang-en');
                if (langData[lang] && langData[lang][key]) {
                    if (element.tagName === 'INPUT') {
                        element.placeholder = langData[lang][key];
                    } else {
                        element.textContent = langData[lang][key];
                    }
                }
            });
            
            // 保存语言偏好
            localStorage.setItem('preferredLanguage', lang);
        }

        // 显示注册页面
        function showRegisterPage() {
            document.getElementById('landing-page-container').classList.add('hidden');
            document.getElementById('register-page').classList.remove('hidden');
        }

        // 显示轮盘页面
        function showWheelPage() {
            document.getElementById('register-page').classList.add('hidden');
            document.getElementById('wheel-page').classList.remove('hidden');
        }

        // 处理注册
        function handleRegistration(event) {
            event.preventDefault();
            
            const name = document.getElementById('name').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const email = document.getElementById('email').value.trim();
            const address = document.getElementById('address').value.trim();
            const countryCode = document.getElementById('country-code').value;
            
            if (!name || !phone) {
                alert(langData[currentLang]["Please fill in required fields."] || "请填写必填项。");
                return;
            }
            
            if (!/^\d+$/.test(phone)) {
                alert(langData[currentLang]["Please enter a valid phone number (digits only)."] || "请输入有效的电话号码（仅限数字）。");
                return;
            }
            
            // 保存用户信息到本地存储
            currentUser = {
                name,
                phone: countryCode + phone,
                email,
                address,
                registrationTime: new Date().toISOString(),
                chances: 1,
                prizes: []
            };
            
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            document.getElementById('user-name-display').textContent = name;
            
            showWheelPage();
            createParticles();
        }

        // 创建粒子效果
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 2 + 's';
                    particlesContainer.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 3000);
                }, i * 100);
            }
        }

        // 绘制轮盘
        function drawWheel() {
            const wheel = document.getElementById('wheel');
            wheel.innerHTML = '';
            
            const totalSegments = prizes.length;
            const segmentAngle = 360 / totalSegments;
            
            prizes.forEach((prize, index) => {
                const segment = document.createElement('div');
                segment.className = 'wheel-segment';
                segment.style.backgroundColor = prize.color;
                segment.style.transform = `rotate(${index * segmentAngle}deg)`;
                
                const text = document.createElement('span');
                text.textContent = langData[currentLang][prize.name] || prize.name;
                segment.appendChild(text);
                
                wheel.appendChild(segment);
            });
        }

        // 抽奖功能
        function spin() {
            if (isSpinning || userChances <= 0) return;
            
            isSpinning = true;
            userChances--;
            document.getElementById('chances-left').textContent = userChances;
            document.getElementById('spin-btn').disabled = true;
            
            // 根据权重选择奖品
            const totalWeight = prizes.reduce((sum, prize) => sum + prize.weight, 0);
            let random = Math.random() * totalWeight;
            let selectedPrize = null;
            
            for (const prize of prizes) {
                random -= prize.weight;
                if (random <= 0) {
                    selectedPrize = prize;
                    break;
                }
            }
            
            const prizeIndex = prizes.indexOf(selectedPrize);
            const segmentAngle = 360 / prizes.length;
            const targetAngle = (prizeIndex * segmentAngle) + (segmentAngle / 2);
            const spinAngle = 360 * 5 + (360 - targetAngle); // 5圈 + 目标角度
            
            const wheel = document.getElementById('wheel');
            wheel.style.transform = `rotate(${spinAngle}deg)`;
            
            setTimeout(() => {
                showPrizeModal(selectedPrize);
                isSpinning = false;
                document.getElementById('spin-btn').disabled = false;
                
                // 保存奖品到用户记录
                if (currentUser) {
                    currentUser.prizes.push({
                        name: selectedPrize.name,
                        time: new Date().toISOString()
                    });
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                }
                
                // 如果是"再来一次"，增加机会
                if (selectedPrize.name === "Spin Again!") {
                    userChances++;
                    document.getElementById('chances-left').textContent = userChances;
                }
            }, 4000);
        }

        // 显示奖品模态框
        function showPrizeModal(prize) {
            const modal = document.getElementById('result-modal');
            const title = document.getElementById('modal-title');
            const text = document.getElementById('modal-text');
            const prizeMessage = document.getElementById('prize-message');
            
            if (prize.name === "Thank You") {
                title.textContent = langData[currentLang]["Thank You"] || "谢谢参与";
                text.textContent = langData[currentLang]["Better luck next time!"] || "祝您下次好运！";
                prizeMessage.textContent = "";
            } else if (prize.name === "Spin Again!") {
                title.textContent = langData[currentLang]["Spin Again!"] || "再来一次！";
                text.textContent = langData[currentLang]["You get another free spin!"] || "您获得了一次额外抽奖机会！";
                prizeMessage.textContent = "";
            } else {
                title.textContent = langData[currentLang]["Congratulations!"] || "恭喜！";
                text.textContent = (langData[currentLang]["You won a"] || "您抽中了") + " " + (langData[currentLang][prize.name] || prize.name);
                prizeMessage.textContent = langData[currentLang]["Congratulations! Come to our booth to claim your prize!"] || "恭喜中奖！快来我们档口兑换奖品吧！";
            }
            
            modal.classList.remove('hidden');
            createParticles();
        }

        // 分享功能
        function share(platform) {
            const shareText = currentLang === 'en' 
                ? langData.en["Visit our Facebook page and get amazing prizes by scanning QR codes at our 1602 booth!"]
                : langData.zh["访问我们的Facebook页面，来到1602档口扫码获大奖！"];
            
            const whatsappText = currentLang === 'en'
                ? langData.en["Welcome! Join our exciting QR code scanning activity at 1602 booth for FREE amazing prizes! Don't miss out!"]
                : langData.zh["欢迎！快来参与我们1602档口的扫码活动，免费获得大奖！千万别错过！"];
            
            if (platform === 'facebook') {
                window.open('https://www.facebook.com', '_blank');
            } else if (platform === 'whatsapp') {
                const url = `https://wa.me/?text=${encodeURIComponent(whatsappText)}`;
                window.open(url, '_blank');
            }
        }

        // 初始化应用
        function initApp() {
            // 加载保存的语言偏好
            const savedLang = localStorage.getItem('preferredLanguage') || 'zh';
            switchLanguage(savedLang);
            
            // 检查是否有保存的用户信息
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                document.getElementById('user-name-display').textContent = currentUser.name;
                userChances = currentUser.chances || 1;
                document.getElementById('chances-left').textContent = userChances;
            }
            
            // 绘制轮盘
            drawWheel();
            
            // 添加事件监听器
            document.getElementById('register-form').addEventListener('submit', handleRegistration);
            document.getElementById('spin-btn').addEventListener('click', spin);
            document.getElementById('modal-close-btn').addEventListener('click', () => {
                document.getElementById('result-modal').classList.add('hidden');
            });
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>